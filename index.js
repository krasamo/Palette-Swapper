(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const g of a.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function L(t){const e=document.getElementById("revert_button");e&&(e.disabled=t!=null?!t:!e.disabled)}function v(t){const e=document.getElementById("swap_button");e&&(e.disabled=!e.disabled)}function E(t){const e=document.getElementById("spinner");e&&(e.style.visibility=e.style.visibility=="hidden"?"visible":"hidden")}function m(t,e){E(),b(e),v(),L(t)}function l(t,e){for(;t.children.length>1;)t.lastElementChild&&t.removeChild(t.lastElementChild);for(const n of e){const i=document.createElement("option");i.id=n.id,i.value=n.id,i.innerHTML=n.name,t.appendChild(i)}}function w(t,e,n,i){if(t)if(e)if(n){if(!i)return"Please select a target Palette"}else return"Please select a target Library";else return"Please select an origin Palette";else return"Please select an origin Library";return""}function b(t){const e=document.getElementById("status_label");e&&(t?(e.innerHTML=t,e.style.visibility="visible"):e.style.visibility="hidden")}const _=new URLSearchParams(window.location.search);document.body.dataset.theme=_.get("theme")??"light";let s,d,c,f,h="Local";var p;(p=document.querySelector("[data-handler='swap']"))==null||p.addEventListener("click",()=>{if(!s||!d||!c||!f){const e=w(s,d,c,f);b(e);return}m(!1,"Swapping..."),u({type:"swap",data:[s,d,c,f],extra:h})});var y;(y=document.querySelector("[data-handler='revert']"))==null||y.addEventListener("click",()=>{m(!1,"Reverting..."),u({type:"revert"})});for(const t of document.querySelectorAll("[data-handler='library_change']"))t.addEventListener("click",e=>{const n=e.target;if(!n.parentElement)return;const i={id:n.value,name:n.innerHTML,type:"Library"},r=n.parentElement.id=="origin_library"?"Origin":"Target";if(n.id.length>0)u({type:"retrieve_palettes_from_library",data:i,from:r}),o(r,"Library",i);else{const a=r=="Origin"?document.getElementById("origin_palette"):document.getElementById("target_palette");a&&(l(a,[]),o(r,"Library",void 0),o(r,"Palette",void 0))}});for(const t of document.querySelectorAll("[data-handler='palette_change']"))t.addEventListener("click",e=>{const n=e.target;if(!n.parentElement)return;const i={id:n.value,name:n.innerHTML,type:"Color"},r=n.parentElement.id=="origin_palette"?"Origin":"Target";n.id.length>0?o(r,"Palette",i):o(r,"Palette",void 0)});for(const t of document.querySelectorAll("[data-handler='effect_range']"))t.addEventListener("click",e=>{h=e.target.value});window.addEventListener("message",t=>{const e=t.data;if(e.type=="build_initial_ui"){const n=t.data.data,i=document.getElementById("origin_library");i&&l(i,n);const r=document.getElementById("target_library");r&&l(r,n)}if(e.type=="build_palette_dropdown"){if(!e.data||!(e.data instanceof Array))return;const n=e.data,r=e.from=="Origin"?document.getElementById("origin_palette"):document.getElementById("target_palette");r&&l(r,n)}if(e.type=="finished_swapping"){const n=e.extra;m(n,"")}e.type=="theme_change"&&(document.body.dataset.theme=t.data.theme)});u({type:"view-will-build"});function u(t){parent.postMessage(t,"*")}function o(t,e,n){t=="Origin"&&e=="Library"?s=n:t=="Origin"&&e=="Palette"?d=n:t=="Target"&&e=="Library"?c=n:t=="Target"&&e=="Palette"&&(f=n)}
